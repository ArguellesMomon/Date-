<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Date With You 💕</title>

    <!-- App Icon -->
    <link rel="apple-touch-icon" href="heart-icon.png">

    <!-- iOS fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Retro font -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
        /* Reset + Base */
        
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            text-align: center;
            color: white;
            overflow: hidden;
            background: url('hearts.gif') no-repeat center/cover fixed;
            position: relative;
            transition: background 0.5s ease-in-out;
            padding: 1rem;
        }
        
        body::before {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 0;
        }
        /* Shared Text Styles */
        
        h1,
        h2,
        p {
            z-index: 1;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6);
            margin: 0.5rem 0;
        }
        
        h1 {
            font-size: clamp(1rem, 4vw, 1.5rem);
        }
        
        p,
        h2 {
            font-size: clamp(0.8rem, 3.5vw, 1.2rem);
        }
        /* Invitation */
        
        #invitation {
            position: fixed;
            inset: 0;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            z-index: 1;
        }
        /* You can keep this blink on the H2 if you want the retro feel in the invite */
        
        h2 {
            animation: blink 1s step-start infinite;
        }
        /* Buttons (shared for retro + normal) */
        
        .btn,
        .retro-btn {
            --bg: hsl(325, 100%, 50%);
            --fg: #fff;
            font-family: inherit;
            padding: 10px 18px;
            border: none;
            cursor: pointer;
            background: linear-gradient(180deg, var(--bg), #ffb6d5);
            color: var(--fg);
            border-left: 6px solid #ff7eb1;
            border-top: 6px solid #ff7eb1;
            box-shadow: 6px 6px 0 0 #ff5d9e inset, 0 8px 0 0 #ff5d9e;
            margin-top: 12px;
            z-index: 2;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn:active,
        .retro-btn:active {
            transform: scale(1.05);
        }
        /* Retro button extras */
        
        .retro-btn:focus {
            outline: 3px dashed #ffd166;
            outline-offset: 4px;
        }
        
        .retro-btn:active {
            transform: translate(4px, 4px);
            box-shadow: none;
        }
        /* Invite Card */
        
        .invite-card {
            display: none;
            position: relative;
            background: rgba(255, 195, 233, 0.95);
            padding: 20px;
            margin-top: 20px;
            max-width: 90%;
            font-size: 0.9rem;
            color: black;
            border: 8px solid #ff4d88;
            image-rendering: pixelated;
            box-shadow: 0 0 0 4px rgba(255, 195, 233, 0.95), 0 0 0 8px #ff4d88, 0 0 20px rgba(255, 77, 136, 0.8);
            animation: fadeIn .8s ease forwards;
        }
        
        .invite-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient( to bottom, rgba(255, 255, 255, 0.05) 0px, rgba(255, 255, 255, 0.05) 2px, transparent 2px, transparent 4px);
            pointer-events: none;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(.8)
            }
            to {
                opacity: 1;
                transform: scale(1)
            }
        }
        /* Pixel Heart */
        
        #pixel-heart {
            width: 72px;
            height: 72px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: url('pixel-heart.png') no-repeat center/contain;
            animation: heartbeat 1s infinite;
            user-select: none;
            z-index: 1;
        }
        
        #pixel-heart .fallback {
            font-size: 32px;
            pointer-events: none;
        }
        
        @keyframes heartbeat {
            0%,
            100% {
                transform: scale(1)
            }
            25% {
                transform: scale(1.25)
            }
            50% {
                transform: scale(1)
            }
        }
        /* Floating Hearts / Compliments */
        
        .hearts,
        .compliment {
            position: fixed;
            top: -10px;
            font-size: 1rem;
            color: #ff5d9e;
            animation: float 4s linear forwards;
            pointer-events: none;
            z-index: 2;
        }
        
        @keyframes float {
            to {
                transform: translateY(600px) rotate(360deg);
                opacity: 0;
            }
        }
        /* Typing Effect */
        
        .typing-cursor::after {
            content: "|";
            margin-left: 6px;
            animation: blink 1s step-end infinite;
            /* caret blink only */
        }
        
        .typing-line {
            font-size: 0.85rem;
            line-height: 1.4;
            color: white;
            white-space: pre-wrap;
            /* preserve your message spacing */
        }
        /* Details */
        
        .more-details {
            display: none;
            margin-top: 12px;
            text-align: left;
            font-size: 0.6rem;
            line-height: 1.4;
            white-space: pre-line;
        }
        /* Fade-out helper */
        
        .fade-out {
            animation: fadeOut .45s forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }
        /* Accessibility: reduced motion */
        
        @media (prefers-reduced-motion: reduce) {
            .hearts,
            #pixel-heart,
            .invite-card {
                animation: none !important;
            }
            .typing-cursor::after {
                display: none;
            }
        }
        /* Small screens */
        
        @media (max-width:500px) {
            .btn {
                padding: 12px 20px;
                min-width: 70%;
            }
            .invite-card {
                font-size: 0.75rem;
                padding: 15px;
            }
            #pixel-heart {
                width: 64px;
                height: 64px;
            }
        }
        
        #intro-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.85);
            color: rgb(255, 157, 191);
            text-align: center;
            padding: 1rem;
            cursor: pointer;
            z-index: 999;
        }
        /* Only hide the tap hint initially */
        
        #tap-hint {
            display: none;
        }
        
        #intro-message {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            color: #ffc8e3;
            line-height: 1.6;
        }
        
        .more-details {
            color: white;
            text-shadow: 0 0 6px rgba(63, 63, 63, 0.8), 0 0 12px rgba(63, 63, 63, 0.8);
        }
    </style>
</head>

<body>
    <!-- Intro -->
    <div id="intro-screen" aria-hidden="false">
        <p id="intro-message" class="typing-line" aria-live="polite" aria-atomic="true" data-text="To my Rein, I know I’m not great with messages, but I just want to tell you how thankful I am for having you in my life. Words can’t justify the feelings I want to express. Yet, let this short message turn what I feel into words. 

You make even the simplest days feel special, I love how you make me feel special, which I have not felt in a long time. Thank you for being my safe place, my happiness, and one of my greatest treasures. No matter what happens, I want you to know that I’ll always choose you and appreciate you."
            data-speed="60"></p>

        <p id="tap-hint" style="display:none; margin-top:1.5rem;"> Tap to continue...💖</p>
    </div>

    <!-- Invitation -->
    <div id="invitation" aria-hidden="true">
        <div id="pixel-heart" role="button" aria-label="Pixel heart">
            <span class="fallback">💖</span>
        </div>

        <h1>Hey My Rein,</h1>
        <p>I have a question for you...</p>
        <h2>Will you go on a date with me?</h2>

        <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center;z-index:1">
            <button class="btn" id="yesBtn">Yes</button>
            <button class="btn" id="noBtn">No</button>
        </div>

        <div id="invite" class="invite-card" aria-hidden="true">
            <p class="typing-line" data-text="You said YES!" data-speed="40" style="font-size: 1.1rem;"></p>
            <p class="typing-line" data-text="📍 Place: Around Lipa City" data-speed="40"></p>
            <p class="typing-line" data-text="🗓 Date: August 20, 2025" data-speed="40"></p>
            <p class="typing-line" data-text="💬 Can’t wait to see you. Dress comfy, I’ll handle the rest 💕" data-speed="40"></p>

            <button class="retro-btn" id="moreBtn" aria-expanded="false" aria-controls="moreText">MORE DETAILS</button>

            <div id="moreText" class="more-details" role="region" aria-hidden="true">
                • I’ll pick you up at your place around 6:00 PM. <br> • Quick photobooth at SM Lipa. <br> • Dinner and walk at Outlet's Lipa. <br> • Enjoy the moment.
            </div>
        </div>

        <div id="score" style="position:fixed;top:10px;right:10px;font-size:1rem;z-index:2">❤️ Score: 0</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const intro = document.getElementById('intro-screen');
            const invitation = document.getElementById('invitation');
            const yesBtn = document.getElementById('yesBtn');
            const noBtn = document.getElementById('noBtn');
            const inviteCard = document.getElementById('invite');
            const scoreEl = document.getElementById('score');
            const pixelHeart = document.getElementById('pixel-heart');
            const moreBtn = document.getElementById('moreBtn');
            const moreText = document.getElementById('moreText');
            const introMessage = document.getElementById('intro-message');
            const tapHint = document.getElementById('tap-hint');

            const backgrounds = ['1.jpg', '2.jpg', '3.jpg'];
            let currentBackground = 0,
                score = 0,
                noSize = 1,
                clickCount = 0;

            const noMessages = ["Sure?", "Really?", "Try again", "Final Answer?", "Think again?", "Please say yes 🥺", "Magdadabog ako", "I love you"];
            const compliments = ["Cute", "Sweet", "Lovely", "Beautiful"];

            const safeAdd = (el, evt, fn) => el && el.addEventListener(evt, fn);

            /* Typing Animation */
            const typeText = (el, text, speed, cb) => {
                if (!el) return;
                el.classList.add('typing-cursor');
                el.textContent = '';
                let i = 0;
                const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                if (reduced) {
                    el.textContent = text;
                    el.classList.remove('typing-cursor');
                    if (typeof cb === "function") cb();
                    return;
                }
                const timer = setInterval(() => {
                    el.textContent += text[i++] || '';
                    if (i >= text.length) {
                        clearInterval(timer);
                        el.classList.remove('typing-cursor');
                        if (typeof cb === "function") cb();
                    }
                }, speed);
            };

            /* Run Intro Typing (replaces blink) */
            const runIntroTyping = () => {
                typeText(
                    introMessage,
                    introMessage.dataset.text, +introMessage.dataset.speed || 40,
                    () => {
                        tapHint.style.display = 'block';
                    }
                );
            };
            runIntroTyping();

            /* Reveal Invitation */
            const revealInvitation = () => {
                intro.classList.add('fade-out');
                intro.addEventListener('animationend', () => {
                    intro.remove();
                    invitation.style.display = 'flex';
                    invitation.setAttribute('aria-hidden', 'false');
                }, {
                    once: true
                });
            };
            safeAdd(intro, 'click', revealInvitation);
            safeAdd(intro, 'touchstart', e => {
                e.preventDefault();
                revealInvitation();
            });

            /* Sequence typing inside invite */
            const runTypingSequence = () => {
                const lines = inviteCard.querySelectorAll('.typing-line');
                let idx = 0;
                const next = () => {
                    if (idx >= lines.length) return;
                    const el = lines[idx++];
                    typeText(el, el.dataset.text || '', +el.dataset.speed || 30, () => setTimeout(next, 300));
                };
                next();
            };

            /* Show Invite */
            const showInvite = () => {
                score++;
                scoreEl.textContent = `❤️ Score: ${score}`;
                inviteCard.style.display = 'block';
                inviteCard.setAttribute('aria-hidden', 'false');
                inviteCard.querySelectorAll('.typing-line').forEach(n => n.textContent = '');
                runTypingSequence();
                changeBackground();
            };
            safeAdd(yesBtn, 'click', showInvite);
            safeAdd(yesBtn, 'touchstart', e => {
                e.preventDefault();
                showInvite();
            });

            /* Background Switcher */
            const changeBackground = () => {
                currentBackground = (currentBackground + 1) % backgrounds.length;
                document.body.style.backgroundImage = `url('${backgrounds[currentBackground]}')`;
            };

            /* Runaway "No" button */
            const runaway = btn => {
                btn.style.position = 'absolute';
                btn.style.left = Math.random() * (window.innerWidth - btn.offsetWidth - 20) + 'px';
                btn.style.top = Math.random() * (window.innerHeight - btn.offsetHeight - 20) + 'px';
            };
            safeAdd(noBtn, 'click', () => runaway(noBtn));
            safeAdd(noBtn, 'touchstart', e => {
                e.preventDefault();
                runaway(noBtn);
            });

            /* Shrink "No" + Cycle Messages (still runs in addition to runaway) */
            safeAdd(noBtn, 'click', () => {
                noSize = Math.max(0.2, noSize - 0.1);
                noBtn.style.transform = `scale(${noSize})`;
                noBtn.textContent = noMessages[clickCount++ % noMessages.length];
                if (noSize <= 0.2) noBtn.style.display = "none";
            });

            /* Pixel Heart Speed Control */
            let heartSpeed = 1.0;
            const speedUpHeart = () => {
                heartSpeed = Math.max(0.35, heartSpeed - 0.12);
                pixelHeart.style.animationDuration = heartSpeed + 's';
                launchCompliment();
            };
            safeAdd(pixelHeart, 'click', speedUpHeart);
            safeAdd(pixelHeart, 'touchstart', e => {
                e.preventDefault();
                speedUpHeart();
            });

            /* Compliment Floating */
            const launchCompliment = () => {
                const word = document.createElement('div');
                word.className = 'compliment';
                word.textContent = compliments[Math.floor(Math.random() * compliments.length)];
                word.style.left = Math.random() * window.innerWidth + 'px';
                document.body.appendChild(word);
                setTimeout(() => word.remove(), 4000);
            };
            setInterval(launchCompliment, 2000);

            /* More Details Toggle */
            const toggleMore = () => {
                const expanded = moreBtn.getAttribute('aria-expanded') === 'true';
                moreBtn.setAttribute('aria-expanded', !expanded);
                moreText.style.display = expanded ? 'none' : 'block';
                moreText.setAttribute('aria-hidden', expanded);
                if (!expanded) {
                    moreText.setAttribute('tabindex', '-1');
                    moreText.focus({
                        preventScroll: true
                    });
                }
            };
            safeAdd(moreBtn, 'click', toggleMore);
            safeAdd(moreBtn, 'keydown', e => {
                if (['Enter', ' '].includes(e.key)) {
                    e.preventDefault();
                    toggleMore();
                }
            });
        });

        /* Typing Animation with sentence pauses */
        const typeText = (el, text, speed, cb) => {
            if (!el) return;
            el.classList.add('typing-cursor');
            el.textContent = '';
            let i = 0;
            const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if (reduced) {
                el.textContent = text;
                el.classList.remove('typing-cursor');
                if (typeof cb === "function") cb();
                return;
            }

            const typeNext = () => {
                if (i < text.length) {
                    el.textContent += text[i];
                    let delay = speed;

                    // Add pause for punctuation
                    if (/[.?!]/.test(text[i])) {
                        delay = speed * 10; // pause longer on sentences
                    } else if (/[,;]/.test(text[i])) {
                        delay = speed * 5; // shorter pause for commas
                    }

                    i++;
                    setTimeout(typeNext, delay);
                } else {
                    el.classList.remove('typing-cursor');
                    if (typeof cb === "function") cb();
                }
            };

            typeNext();
        };
    </script>
</body>

</html>